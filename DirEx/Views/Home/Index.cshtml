@model DirEx.Models.DirectoryViewModel

@{
    ViewBag.Title = "Index";
}

<div class="sidebar">

		@ShowTree(Model.Entries, true)
</div>
<div class="content">

</div>


	@helper ShowTree(ICollection<DirEx.Models.EntryViewModel> entries, bool root = false)
	{
	<ul class="list-group">
		@foreach (var entry in entries)
		{
		<li class="list-group-item">
			@Html.ActionLink(entry.RelativeName, "index", new { currentDn = @entry.DistinguishedName })
			@if (entry.Entries.Any() && (root || (Request.Params["currentDn"].EndsWith(entry.DistinguishedName))))
			{
				@ShowTree(entry.Entries)
			}
		</li>
		}
	</ul>
}
